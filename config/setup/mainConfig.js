const constants =
{
    'en': {
        "popup.welcome.title": {"innerHtml": "Welcome to GitaGPT"},
        "email-input": {"placeholder": "email or mobile number"},
        "popup.language.label": {"innerHtml": "Select Language"},
        "popup.disclaimer": {"innerHtml": "It is completely optional to provide email or mobile number."},
        "email-submit": {"innerHtml": "continue"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "Unlocking life's mysteries with Krishna, 8,00,000+ answered queries"},
        "search-box-input": {"placeholder": "Ask Bhagavad Gita a question.."},
        "main.disclaimer": {"innerHtml": "Disclaimer: Please use your discretion and don't base your decisions on this experimental AI project."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "Home"},
        "link-chat": {"innerHtml": "Chat"},
        "menu.clear_session": {"innerHtml": "Clear Session"},
        "chat.follow_text": "Do follow us on",
        "chat.donation_link": "Donate to our cause",
        "chat.donation_text": " to keep this website running.",
        "donate.popup.welcome.title": {"innerHtml": "Donate to GitaGPT"},
        "donate-description": {"innerHtml": "Please contribute to this project by making a donation. Every small donation counts.\nLove, Krishna ❤️"},
        "share.question": "Question",
        "share.answer": "Answer",
        "share.ask_any": "Ask any questions about life to GitaGPT - ",
        "action.retry": "Retry",
        "action.share": "Share"
    },
    'hi' : {
        "popup.welcome.title": {"innerHtml": "GitaGPT में आपका स्वागत है"},
        "email-input": {"placeholder": "ईमेल या मोबाइल नंबर"},
        "popup.language.label": {"innerHtml": "भाषा का चयन करे"},
        "popup.disclaimer": {"innerHtml": "ईमेल या मोबाइल नंबर प्रदान करना पूरी तरह से वैकल्पिक है।"},
        "email-submit": {"innerHtml": "ठीक है"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "कृष्ण के साथ जीवन के रहस्यों की खोज, 8,00,000+ सवालों के जवाब दिए"},
        "search-box-input": {"placeholder": "भगवद् गीता से प्रश्न पूछें.."},
        "main.disclaimer": {"innerHtml": "अस्वीकरण: कृपया अपने विवेक का उपयोग करें और इस प्रायोगिक एआई परियोजना पर अपने निर्णयों को आधार न बनाएं।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "होम"},
        "link-chat": {"innerHtml": "चैट"},
        "menu.clear_session": {"innerHtml": "सत्र बसमाप्त करें"},
        "chat.follow_text": "हमें फॉलो करें",
        "chat.donation_link": "हमारे उद्देश्य के लिए दान करें",
        "chat.donation_text": " ताकि यह वेबसाइट चलती रहे।",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT को दान करें"},
        "donate-description": {"innerHtml": "कृपया दान करके इस परियोजना में योगदान दें। हर दान छोटा या बड़ा मायने रखता है।\nकृष्णा ❤️"},
        "share.question": "प्रश्न",
        "share.answer": "उत्तर",
        "share.ask_any": "जीवन के बारे में कोई भी प्रश्न GitaGPT से पूछें - ",
        "action.retry": "पुन: प्रयास",
        "action.share": "शेयर"
    },
    'as': {
        "popup.welcome.title": {"innerHtml": "GitaGPT লৈ আপোনাক স্বাগতম"},
        "email-input": {"placeholder": "ইমেইল বা মোবাইল নম্বৰ"},
        "popup.language.label": {"innerHtml": "ভাষা নিৰ্বাচন কৰক"},
        "popup.disclaimer": {"innerHtml": "ইমেইল বা মোবাইল নম্বৰ দিয়াটো সম্পূৰ্ণ ঐচ্ছিক।"},
        "email-submit": {"innerHtml": "অব্যাহত ৰাখক"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "কৃষ্ণৰ সৈতে জীৱনৰ ৰহস্যসমূহ উন্মোচন কৰি ৮,০০,০০০+ প্ৰশ্নৰ উত্তৰ দিলে"},
        "search-box-input": {"placeholder": "গীতাক এটা প্ৰশ্ন সুধিব.."},
        "main.disclaimer": {"innerHtml": "অস্বীকাৰ: অনুগ্ৰহ কৰি আপোনাৰ বিবেচনা ব্যৱহাৰ কৰক আৰু এই পৰীক্ষামূলক AI প্ৰকল্পৰ ওপৰত আপোনাৰ সিদ্ধান্ত ভিত্তি নকৰিব।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "গৃহ"},
        "link-chat": {"innerHtml": "চাট"},
        "menu.clear_session": {"innerHtml": "অধিবেশন পৰিষ্কাৰ কৰক"},
        "chat.follow_text": "আমাক অনুসৰণ কৰক",
        "chat.donation_link": "আমাৰ কামত দান কৰক",
        "chat.donation_text": " এই ৱেবছাইটটো চলি থাকিবলৈ।",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT লৈ দান কৰক"},
        "donate-description": {"innerHtml": "অনুগ্ৰহ কৰি এই প্ৰকল্পত অনুদান আগবঢ়াই বৰঙণি আগবঢ়াব। প্ৰতিটো সৰু সৰু অনুদানৰ গুৰুত্ব আছে। \nপ্ৰেম, কৃষ্ণ ❤️"},
        "share.question": "প্ৰশ্ন",
        "share.answer": "উত্তৰ",
        "share.ask_any": "জীৱন সম্পৰ্কে যিকোনো প্ৰশ্ন সোধক GitaGPT -",
        "action.retry": "পুনৰ চেষ্টা কৰক",
        "action.share": "ভাগ-বতৰা কৰা"
    },
    'bn': {
        "popup.welcome.title": {"innerHtml": "GitaGPT তে স্বাগতম"},
        "email-input": {"placeholder": "ইমেইল বা মোবাইল নম্বর"},
        "popup.language.label": {"innerHtml": "ভাষা নির্বাচন কর"},
        "popup.disclaimer": {"innerHtml": "ইমেল বা মোবাইল নম্বর প্রদান করা সম্পূর্ণ ঐচ্ছিক।"},
        "email-submit": {"innerHtml": "চালিয়ে যান"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "কৃষ্ণের সাথে জীবনের রহস্য উন্মোচন করা, 8,00,000+ প্রশ্নের উত্তর দেওয়া হয়েছে"},
        "search-box-input": {"placeholder": "গীতাকে একটা প্রশ্ন কর.."},
        "main.disclaimer": {"innerHtml": "দাবিত্যাগ: অনুগ্রহ করে আপনার বিচক্ষণতা ব্যবহার করুন এবং এই পরীক্ষামূলক এআই প্রকল্পের উপর ভিত্তি করে আপনার সিদ্ধান্ত নেবেন না।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "বাড়ি"},
        "link-chat": {"innerHtml": "চ্যাট"},
        "menu.clear_session": {"innerHtml": "সেশন সাফ করুন"},
        "chat.follow_text": "আমাদের অনুসরণ করুন",
        "chat.donation_link": "আমাদের কারণ দান",
        "chat.donation_text": " এই ওয়েবসাইট চালু রাখা.",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT তে দান করুন"},
        "donate-description": {"innerHtml": "অনুদান করে এই প্রকল্পে অবদান রাখুন। প্রতিটি ছোট দান গণনা. \nপ্রেম, কৃষ্ণ ❤️"},
        "share.question": "প্রশ্ন",
        "share.answer": "উত্তর",
        "share.ask_any": "GitaGPT-কে জীবন সম্পর্কে যেকোন প্রশ্ন জিজ্ঞাসা করুন-",
        "action.retry": "পুনরায় চেষ্টা করা",
        "action.share": "শেয়ার করুন"
    },
    'gu': {
        "popup.welcome.title": {"innerHtml": "ગીતાજીપીટીમાં આપનું સ્વાગત છે"},
        "email-input": {"placeholder": "ઈમેલ અથવા મોબાઈલ નંબર"},
        "popup.language.label": {"innerHtml": "ભાષા પસંદ કરો"},
        "popup.disclaimer": {"innerHtml": "ઈમેલ અથવા મોબાઈલ નંબર આપવો તે સંપૂર્ણપણે વૈકલ્પિક છે."},
        "email-submit": {"innerHtml": "ચાલુ રાખો"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "કૃષ્ણ સાથે જીવનના રહસ્યો ખોલીને, 8,00,000+ પ્રશ્નોના જવાબ આપ્યા"},
        "search-box-input": {"placeholder": "ગીતાને એક પ્રશ્ન પૂછો.."},
        "main.disclaimer": {"innerHtml": "અસ્વીકરણ: કૃપા કરીને તમારી વિવેકબુદ્ધિનો ઉપયોગ કરો અને તમારા નિર્ણયોને આ પ્રાયોગિક AI પ્રોજેક્ટ પર આધારિત ન રાખો."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "હોમ"},
        "link-chat": {"innerHtml": "ચેટ"},
        "menu.clear_session": {"innerHtml": "સત્ર સાફ કરો"},
        "chat.follow_text": "અમને ફોલો કરો",
        "chat.donation_link": "અમારા હેતુ માટે દાન કરો",
        "chat.donation_text": " આ વેબસાઇટ ચાલુ રાખવા માટે.",
        "donate.popup.welcome.title": {"innerHtml": "ગીતાજીપીટીને દાન આપો"},
        "donate-description": {"innerHtml": "કૃપા કરીને દાન આપીને આ પ્રોજેક્ટમાં યોગદાન આપો. દરેક નાના દાનની ગણતરી થાય છે.\nપ્રેમ, કૃષ્ણ ❤️"},
        "share.question": "પ્રશ્ન",
        "share.answer": "જવાબ આપો",
        "share.ask_any": "ગીતાજીપીટીને જીવન વિશે કોઈપણ પ્રશ્નો પૂછો -",
        "action.retry": "ફરી પ્રયાસ કરો",
        "action.share": "શેર કરો"
    },
    'kn': {
        "popup.welcome.title": {"innerHtml": "GitaGPT ಗೆ ಸುಸ್ವಾಗತ"},
        "email-input": {"placeholder": "ಇಮೇಲ್ ಅಥವಾ ಮೊಬೈಲ್ ಸಂಖ್ಯೆ"},
        "popup.language.label": {"innerHtml": "ಭಾಷೆಯನ್ನು ಆಯ್ಕೆಮಾಡಿ"},
        "popup.disclaimer": {"innerHtml": "ಇಮೇಲ್ ಅಥವಾ ಮೊಬೈಲ್ ಸಂಖ್ಯೆಯನ್ನು ಒದಗಿಸುವುದು ಸಂಪೂರ್ಣವಾಗಿ ಐಚ್ಛಿಕವಾಗಿರುತ್ತದೆ."},
        "email-submit": {"innerHtml": "ಮುಂದುವರಿಸಿ"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "ಕೃಷ್ಣನೊಂದಿಗೆ ಜೀವನದ ರಹಸ್ಯಗಳನ್ನು ಅನ್ಲಾಕ್ ಮಾಡಿ, 8,00,000+ ಪ್ರಶ್ನೆಗಳಿಗೆ ಉತ್ತರಿಸಲಾಗಿದೆ"},
        "search-box-input": {"placeholder": "ಗೀತಾಗೆ ಒಂದು ಪ್ರಶ್ನೆ ಕೇಳಿ.."},
        "main.disclaimer": {"innerHtml": "ಹಕ್ಕುತ್ಯಾಗ: ದಯವಿಟ್ಟು ನಿಮ್ಮ ವಿವೇಚನೆಯನ್ನು ಬಳಸಿ ಮತ್ತು ಈ ಪ್ರಾಯೋಗಿಕ AI ಯೋಜನೆಯಲ್ಲಿ ನಿಮ್ಮ ನಿರ್ಧಾರಗಳನ್ನು ಆಧರಿಸಿರಬೇಡಿ."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "ಮುಖಪುಟ"},
        "link-chat": {"innerHtml": "ಚಾಟ್ ಮಾಡಿ"},
        "menu.clear_session": {"innerHtml": "ಅಧಿವೇಶನವನ್ನು ತೆರವುಗೊಳಿಸಿ"},
        "chat.follow_text": "ನಮ್ಮನ್ನು ಅನುಸರಿಸಿ",
        "chat.donation_link": "ನಮ್ಮ ಉದ್ದೇಶಕ್ಕೆ ದಾನ ಮಾಡಿ",
        "chat.donation_text": " ಈ ವೆಬ್‌ಸೈಟ್ ಚಾಲನೆಯಲ್ಲಿರಲು.",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT ಗೆ ದೇಣಿಗೆ ನೀಡಿ"},
        "donate-description": {"innerHtml": "ದಯವಿಟ್ಟು ದೇಣಿಗೆ ನೀಡುವ ಮೂಲಕ ಈ ಯೋಜನೆಗೆ ಕೊಡುಗೆ ನೀಡಿ. ಪ್ರತಿಯೊಂದು ಸಣ್ಣ ದೇಣಿಗೆಯು ಗಣನೆಗೆ ಬರುತ್ತದೆ.\nಪ್ರೀತಿ, ಕೃಷ್ಣ ❤️"},
        "share.question": "ಪ್ರಶ್ನೆ",
        "share.answer": "ಉತ್ತರ",
        "share.ask_any": "GitaGPT ಗೆ ಜೀವನದ ಬಗ್ಗೆ ಯಾವುದೇ ಪ್ರಶ್ನೆಗಳನ್ನು ಕೇಳಿ -",
        "action.retry": "ಮರುಪ್ರಯತ್ನಿಸಿ",
        "action.share": "ಹಂಚಿಕೊಳ್ಳಿ"
    },
    'ml': {
        "popup.welcome.title": {"innerHtml": "GitaGPT-ലേക്ക് സ്വാഗതം"},
        "email-input": {"placeholder": "ഇമെയിൽ അല്ലെങ്കിൽ മൊബൈൽ നമ്പർ"},
        "popup.language.label": {"innerHtml": "ഭാഷ തിരഞ്ഞെടുക്കുക"},
        "popup.disclaimer": {"innerHtml": "ഇമെയിൽ അല്ലെങ്കിൽ മൊബൈൽ നമ്പർ നൽകുന്നത് പൂർണ്ണമായും ഓപ്ഷണലാണ്."},
        "email-submit": {"innerHtml": "തുടരുക"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "കൃഷ്ണനൊപ്പം ജീവിതത്തിന്റെ നിഗൂഢതകൾ തുറക്കുന്നു, 8,00,000+ ചോദ്യങ്ങൾക്ക് ഉത്തരം ലഭിച്ചു"},
        "search-box-input": {"placeholder": "ഗീതയോട് ഒരു ചോദ്യം ചോദിക്കൂ.."},
        "main.disclaimer": {"innerHtml": "നിരാകരണം: ദയവായി നിങ്ങളുടെ വിവേചനാധികാരം ഉപയോഗിക്കുക, ഈ പരീക്ഷണാത്മക AI പ്രോജക്റ്റിൽ നിങ്ങളുടെ തീരുമാനങ്ങളെ അടിസ്ഥാനമാക്കരുത്."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "ഹോം"},
        "link-chat": {"innerHtml": "ചാറ്റ്"},
        "menu.clear_session": {"innerHtml": "സെഷൻ മായ്‌ക്കുക"},
        "chat.follow_text": "ഞങ്ങളെ പിന്തുടരുക",
        "chat.donation_link": "ഞങ്ങളുടെ ലക്ഷ്യത്തിനായി സംഭാവന ചെയ്യുക",
        "chat.donation_text": " ഈ വെബ്സൈറ്റ് പ്രവർത്തിക്കുന്നത് നിലനിർത്താൻ.",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT-ലേക്ക് സംഭാവന ചെയ്യുക"},
        "donate-description": {"innerHtml": "ഒരു സംഭാവന നൽകി ഈ പദ്ധതിയിലേക്ക് സംഭാവന ചെയ്യുക. ഓരോ ചെറിയ സംഭാവനയും വിലമതിക്കുന്നു.\nസ്നേഹം, കൃഷ്ണാ ❤️"},
        "share.question": "ചോദ്യം",
        "share.answer": "ഉത്തരം",
        "share.ask_any": "ജീവിതത്തെക്കുറിച്ചുള്ള എന്തെങ്കിലും ചോദ്യങ്ങൾ ഗീതാജിപിടിയോട് ചോദിക്കൂ -",
        "action.retry": "വീണ്ടും ശ്രമിക്കുക",
        "action.share": "പങ്കിടുക"
    },
    'mr': {
        "popup.welcome.title": {"innerHtml": "GitaGPT मध्ये आपले स्वागत आहे"},
        "email-input": {"placeholder": "ईमेल किंवा मोबाईल नंबर"},
        "popup.language.label": {"innerHtml": "भाषा निवडा"},
        "popup.disclaimer": {"innerHtml": "ईमेल किंवा मोबाईल नंबर देणे पूर्णपणे ऐच्छिक आहे."},
        "email-submit": {"innerHtml": "सुरू"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "कृष्णासह जीवनातील रहस्ये उलगडत, ४,००,०००+ प्रश्नांची उत्तरे दिली"},
        "search-box-input": {"placeholder": "गीताला प्रश्न विचारा.."},
        "main.disclaimer": {"innerHtml": "अस्वीकरण: कृपया तुमचा विवेक वापरा आणि या प्रायोगिक AI प्रकल्पावर तुमचे निर्णय घेऊ नका."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "मुख्यपृष्ठ"},
        "link-chat": {"innerHtml": "गप्पा"},
        "menu.clear_session": {"innerHtml": "सत्र साफ करा"},
        "chat.follow_text": "आमचे अनुसरण करा",
        "chat.donation_link": "आमच्या कारणासाठी देणगी द्या",
        "chat.donation_text": " ही वेबसाइट चालू ठेवण्यासाठी.",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT ला दान करा"},
        "donate-description": {"innerHtml": "कृपया देणगी देऊन या प्रकल्पाला हातभार लावा. प्रत्येक लहान दान मोजले जाते.\nप्रेम, कृष्ण ❤️"},
        "share.question": "प्रश्न",
        "share.answer": "उत्तर द्या",
        "share.ask_any": "जीवनाविषयी कोणतेही प्रश्न गीताजीपीटीला विचारा -",
        "action.retry": "पुन्हा प्रयत्न करा",
        "action.share": "शेअर करा"
    },
    'or': {
        "popup.welcome.title": {"innerHtml": "GitaGPT କୁ ସ୍ୱାଗତ |"},
        "email-input": {"placeholder": "ଇମେଲ୍ କିମ୍ବା ମୋବାଇଲ୍ ନମ୍ବର |"},
        "popup.language.label": {"innerHtml": "ଭାଷା ଚୟନ କରନ୍ତୁ |"},
        "popup.disclaimer": {"innerHtml": "ଇମେଲ୍ କିମ୍ବା ମୋବାଇଲ୍ ନମ୍ବର ପ୍ରଦାନ କରିବା ସମ୍ପୂର୍ଣ୍ଣ ଇଚ୍ଛାଧୀନ ଅଟେ |"},
        "email-submit": {"innerHtml": "ଜାରି ରଖ |"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "କୃଷ୍ଣଙ୍କ ସହିତ ଜୀବନର ରହସ୍ୟ ଖୋଲିବା, 8,00,000+ ପ୍ରଶ୍ନର ଉତ୍ତର ଦେଇଥିଲେ |"},
        "search-box-input": {"placeholder": "ଗୀତାଙ୍କୁ ଏକ ପ୍ରଶ୍ନ ପଚାର .."},
        "main.disclaimer": {"innerHtml": "ପ୍ରତ୍ୟାଖ୍ୟାନ: ଦୟାକରି ଆପଣଙ୍କର ବିବେକ ବ୍ୟବହାର କରନ୍ତୁ ଏବଂ ଏହି ପରୀକ୍ଷାମୂଳକ AI ପ୍ରୋଜେକ୍ଟ ଉପରେ ଆପଣଙ୍କର ନିଷ୍ପତ୍ତି ଆଧାର କରନ୍ତୁ ନାହିଁ |"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "ଘର"},
        "link-chat": {"innerHtml": "ଚାଟ୍ କରନ୍ତୁ |"},
        "menu.clear_session": {"innerHtml": "ଅଧିବେଶନ ଖାଲି କରନ୍ତୁ |"},
        "chat.follow_text": "ଆମକୁ ଅନୁସରଣ କର |",
        "chat.donation_link": "ଆମର କାରଣ ପାଇଁ ଦାନ କରନ୍ତୁ |",
        "chat.donation_text": " ଏହି ୱେବସାଇଟ୍ ଚାଲିବା ପାଇଁ |",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT କୁ ଦାନ କରନ୍ତୁ |"},
        "donate-description": {"innerHtml": "ଦୟାକରି ଏକ ଦାନ କରି ଏହି ପ୍ରକଳ୍ପରେ ସହଯୋଗ କରନ୍ତୁ | ପ୍ରତ୍ୟେକ ଛୋଟ ଦାନ ଗଣନା କରାଯାଏ। \ n ପ୍ରେମ, କୃଷ୍ଣ ❤️"},
        "share.question": "ପ୍ରଶ୍ନ |",
        "share.answer": "ଉତ୍ତର",
        "share.ask_any": "ଜୀବନ ବିଷୟରେ କ questions ଣସି ପ୍ରଶ୍ନ GitaGPT କୁ ପଚାର -",
        "action.retry": "ପୁନ ry ଚେଷ୍ଟା କରନ୍ତୁ |",
        "action.share": "ଅଂଶୀଦାର କରନ୍ତୁ |"
    },
    'pa': {
        "popup.welcome.title": {"innerHtml": "GitaGPT ਵਿੱਚ ਤੁਹਾਡਾ ਸੁਆਗਤ ਹੈ"},
        "email-input": {"placeholder": "ਈਮੇਲ ਜਾਂ ਮੋਬਾਈਲ ਨੰਬਰ"},
        "popup.language.label": {"innerHtml": "ਭਾਸ਼ਾ ਚੁਣੋ"},
        "popup.disclaimer": {"innerHtml": "ਈਮੇਲ ਜਾਂ ਮੋਬਾਈਲ ਨੰਬਰ ਪ੍ਰਦਾਨ ਕਰਨਾ ਪੂਰੀ ਤਰ੍ਹਾਂ ਵਿਕਲਪਿਕ ਹੈ।"},
        "email-submit": {"innerHtml": "ਜਾਰੀ ਰੱਖੋ"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "ਕ੍ਰਿਸ਼ਨ ਨਾਲ ਜੀਵਨ ਦੇ ਰਹੱਸਾਂ ਨੂੰ ਖੋਲ੍ਹਣਾ, 8,00,000+ ਸਵਾਲਾਂ ਦੇ ਜਵਾਬ ਦਿੱਤੇ"},
        "search-box-input": {"placeholder": "ਗੀਤਾ ਨੂੰ ਸਵਾਲ ਪੁੱਛੋ.."},
        "main.disclaimer": {"innerHtml": "ਬੇਦਾਅਵਾ: ਕਿਰਪਾ ਕਰਕੇ ਆਪਣੇ ਵਿਵੇਕ ਦੀ ਵਰਤੋਂ ਕਰੋ ਅਤੇ ਆਪਣੇ ਫੈਸਲਿਆਂ ਨੂੰ ਇਸ ਪ੍ਰਯੋਗਾਤਮਕ AI ਪ੍ਰੋਜੈਕਟ 'ਤੇ ਅਧਾਰਤ ਨਾ ਕਰੋ।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "ਘਰ"},
        "link-chat": {"innerHtml": "ਚੈਟ"},
        "menu.clear_session": {"innerHtml": "ਸੈਸ਼ਨ ਸਾਫ਼ ਕਰੋ"},
        "chat.follow_text": "ਸਾਨੂੰ 'ਤੇ ਪਾਲਣਾ ਕਰੋ",
        "chat.donation_link": "ਸਾਡੇ ਕਾਰਨ ਲਈ ਦਾਨ ਕਰੋ",
        "chat.donation_text": " ਇਸ ਵੈੱਬਸਾਈਟ ਨੂੰ ਚੱਲਦਾ ਰੱਖਣ ਲਈ।",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT ਨੂੰ ਦਾਨ ਕਰੋ"},
        "donate-description": {"innerHtml": "ਕਿਰਪਾ ਕਰਕੇ ਦਾਨ ਦੇ ਕੇ ਇਸ ਪ੍ਰੋਜੈਕਟ ਵਿੱਚ ਯੋਗਦਾਨ ਪਾਓ। ਹਰ ਛੋਟਾ ਦਾਨ ਗਿਣਿਆ ਜਾਂਦਾ ਹੈ।\nਪ੍ਰੇਮ, ਕ੍ਰਿਸ਼ਨ ❤️"},
        "share.question": "ਸਵਾਲ",
        "share.answer": "ਜਵਾਬ",
        "share.ask_any": "GitaGPT ਨੂੰ ਜੀਵਨ ਬਾਰੇ ਕੋਈ ਸਵਾਲ ਪੁੱਛੋ -",
        "action.retry": "ਦੁਬਾਰਾ ਕੋਸ਼ਿਸ਼ ਕਰੋ",
        "action.share": "ਸ਼ੇਅਰ ਕਰੋ"
    },
    'ta': {
        "popup.welcome.title": {"innerHtml": "கீதாஜிபிடிக்கு வரவேற்கிறோம்"},
        "email-input": {"placeholder": "மின்னஞ்சல் அல்லது மொபைல் எண்"},
        "popup.language.label": {"innerHtml": "மொழியை தேர்ந்தெடுங்கள்"},
        "popup.disclaimer": {"innerHtml": "மின்னஞ்சல் அல்லது மொபைல் எண்ணை வழங்குவது முற்றிலும் விருப்பமானது."},
        "email-submit": {"innerHtml": "தொடரவும்"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "கிருஷ்ணாவுடன் வாழ்க்கையின் மர்மங்களைத் திறந்து, 8,00,000+ கேள்விகளுக்குப் பதிலளித்தார்"},
        "search-box-input": {"placeholder": "கீதாவிடம் ஒரு கேள்வி கேள்.."},
        "main.disclaimer": {"innerHtml": "பொறுப்புத் துறப்பு: தயவு செய்து உங்களின் விருப்புரிமையைப் பயன்படுத்துங்கள் மேலும் இந்த சோதனை AI திட்டத்தில் உங்கள் முடிவுகளை எடுக்க வேண்டாம்."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "வீடு"},
        "link-chat": {"innerHtml": "அரட்டை"},
        "menu.clear_session": {"innerHtml": "தெளிவான அமர்வு"},
        "chat.follow_text": "எங்களைப் பின்தொடரவும்",
        "chat.donation_link": "எங்கள் நோக்கத்திற்காக தானம் செய்யுங்கள்",
        "chat.donation_text": " இந்த இணையதளத்தை இயங்க வைக்க.",
        "donate.popup.welcome.title": {"innerHtml": "கீதாஜிபிடிக்கு நன்கொடை அளியுங்கள்"},
        "donate-description": {"innerHtml": "நன்கொடை அளிப்பதன் மூலம் இந்த திட்டத்திற்கு பங்களிக்கவும். ஒவ்வொரு சிறிய நன்கொடையும் முக்கியமானது.\nஅன்பு, கிருஷ்ணா ❤️"},
        "share.question": "கேள்வி",
        "share.answer": "பதில்",
        "share.ask_any": "வாழ்க்கையைப் பற்றிய ஏதேனும் கேள்விகளை கீதாஜிபிடியிடம் கேளுங்கள் -",
        "action.retry": "மீண்டும் முயற்சிக்கவும்",
        "action.share": "பகிர்"
    },
    'te': {
        "popup.welcome.title": {"innerHtml": "GitaGPTకి స్వాగతం"},
        "email-input": {"placeholder": "ఇమెయిల్ లేదా మొబైల్ నంబర్"},
        "popup.language.label": {"innerHtml": "భాషను ఎంచుకోండి"},
        "popup.disclaimer": {"innerHtml": "ఇమెయిల్ లేదా మొబైల్ నంబర్‌ను అందించడం పూర్తిగా ఐచ్ఛికం."},
        "email-submit": {"innerHtml": "కొనసాగుతుంది"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "కృష్ణుడితో జీవిత రహస్యాలను అన్‌లాక్ చేస్తూ, 8,00,000+ ప్రశ్నలకు సమాధానాలు ఇచ్చారు"},
        "search-box-input": {"placeholder": "గీతను ఒక ప్రశ్న అడగండి.."},
        "main.disclaimer": {"innerHtml": "నిరాకరణ: దయచేసి మీ విచక్షణను ఉపయోగించండి మరియు ఈ ప్రయోగాత్మక AI ప్రాజెక్ట్‌పై మీ నిర్ణయాలను ఆధారం చేసుకోకండి."},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "హోమ్"},
        "link-chat": {"innerHtml": "చాట్"},
        "menu.clear_session": {"innerHtml": "సెషన్‌ను క్లియర్ చేయండి"},
        "chat.follow_text": "మమ్మల్ని అనుసరించండి",
        "chat.donation_link": "మా పనికి దానం చేయండి",
        "chat.donation_text": " ఈ వెబ్‌సైట్ అమలులో ఉంచడానికి.",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPTకి విరాళం ఇవ్వండి"},
        "donate-description": {"innerHtml": "దయచేసి విరాళం ఇవ్వడం ద్వారా ఈ ప్రాజెక్ట్‌కు సహకరించండి. ప్రతి చిన్న విరాళం లెక్కించబడుతుంది.\nప్రేమ, కృష్ణ ❤️"},
        "share.question": "ప్రశ్న",
        "share.answer": "సమాధానం",
        "share.ask_any": "GitaGPTకి జీవితం గురించి ఏవైనా ప్రశ్నలు అడగండి -",
        "action.retry": "మళ్లీ ప్రయత్నించండి",
        "action.share": "షేర్ చేయండి"
    },
    'bho': {
        "popup.welcome.title": {"innerHtml": "GitaGPT में राउर स्वागत बा"},
        "email-input": {"placeholder": "ईमेल भा मोबाइल नंबर पर भेजल जाव"},
        "popup.language.label": {"innerHtml": "भाषा के चयन करीं"},
        "popup.disclaimer": {"innerHtml": "ईमेल भा मोबाइल नंबर दिहल पूरा तरह से वैकल्पिक बा."},
        "email-submit": {"innerHtml": "चालू रखीं"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "कृष्ण के साथ जीवन के रहस्य के ताला खोलत, 8,00,000+ सवाल के जवाब दिहलस"},
        "search-box-input": {"placeholder": "गीता से एगो सवाल पूछीं.."},
        "main.disclaimer": {"innerHtml": "अस्वीकरण: कृपया आपन विवेक के इस्तेमाल करीं आ आपन फैसला एह प्रयोगात्मक एआई प्रोजेक्ट पर आधारित मत करीं।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "होम"},
        "link-chat": {"innerHtml": "बातचित"},
        "menu.clear_session": {"innerHtml": "साफ सत्र के बा"},
        "chat.follow_text": "कर हमनी के फॉलो करीं",
        "chat.donation_link": "हमनी के मुद्दा में दान करीं",
        "chat.donation_text": " एह वेबसाइट के चलत राखे खातिर.",
        "donate.popup.welcome.title": {"innerHtml": "गीटाजीपीटी में दान करीं"},
        "donate-description": {"innerHtml": "रउरा सभे से निहोरा बा कि एह प्रोजेक्ट में चंदा दे के आपन योगदान दीं. हर छोट दान के गिनती होला।\nप्रेम, कृष्ण ❤️"},
        "share.question": "सवाल",
        "share.answer": "जबाब",
        "share.ask_any": "जीवन के बारे में कवनो सवाल गीताजीपीटी से पूछीं - ",
        "action.retry": "दोबारा कोशिश करीं",
        "action.share": "शेयर करीं"
    },
    'mai': {
        "popup.welcome.title": {"innerHtml": "GitaGPT मे अपनेक स्वागत अछि"},
        "email-input": {"placeholder": "ईमेल या मोबाइल नंबर पर"},
        "popup.language.label": {"innerHtml": "भाषा चुनें"},
        "popup.disclaimer": {"innerHtml": "ईमेल या मोबाइल नंबर देनाय पूर्ण रूप सं वैकल्पिक छै."},
        "email-submit": {"innerHtml": "करैत रहू"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "कृष्ण के साथ जीवन के रहस्यों को अनलॉक करते हुए 8,00,000+ सवालों के जवाब |"},
        "search-box-input": {"placeholder": "गीता स एकटा सवाल पूछू.."},
        "main.disclaimer": {"innerHtml": "अस्वीकरण: कृपया अपन विवेकक उपयोग करू आ अपन निर्णय एहि प्रयोगात्मक एआई परियोजना पर आधारित नहि करू।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "होम"},
        "link-chat": {"innerHtml": "बातचीत"},
        "menu.clear_session": {"innerHtml": "स्पष्ट सत्र"},
        "chat.follow_text": "करु हमरा सब के फॉलो करू",
        "chat.donation_link": "हमर काज मे दान करू",
        "chat.donation_text": " एहि वेबसाइट के चलैत रहय लेल.",
        "donate.popup.welcome.title": {"innerHtml": "गीटाजीपीटी मे दान करू"},
        "donate-description": {"innerHtml": "कृपया दान द क एहि परियोजना मे योगदान दी। हर छोट दान के गिनती।\nप्रेम, कृष्ण ❤️"},
        "share.question": "प्रश्न",
        "share.answer": "उत्तर",
        "share.ask_any": "जीवन के बारे में कोनो तरहक सवाल GitaGPT - स पूछू।",
        "action.retry": "पुनः प्रयास करू",
        "action.share": "शेयर करे"
    },
    'sa': {
        "popup.welcome.title": {"innerHtml": "GitaGPT इत्यत्र स्वागतम्"},
        "email-input": {"placeholder": "ईमेल अथवा मोबाईल नम्बर"},
        "popup.language.label": {"innerHtml": "भाषां चिनोतु"},
        "popup.disclaimer": {"innerHtml": "ईमेल अथवा मोबाईल नम्बर प्रदातुं सर्वथा वैकल्पिकम् अस्ति।"},
        "email-submit": {"innerHtml": "अनुवर्तते"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "कृष्णेन सह जीवनस्य रहस्यं उद्घाटयन् 8,00,000+ प्रश्नानाम् उत्तरं दत्तवन्तः"},
        "search-box-input": {"placeholder": "गीताम् एकं प्रश्नं पृच्छतु.."},
        "main.disclaimer": {"innerHtml": "अस्वीकरणम् : कृपया स्वविवेकस्य उपयोगं कुर्वन्तु तथा च अस्मिन् प्रयोगात्मके AI परियोजनायाः आधारेण स्वनिर्णयं न कुर्वन्तु।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "होम"},
        "link-chat": {"innerHtml": "संवाद"},
        "menu.clear_session": {"innerHtml": "स्पष्टं सत्रम्"},
        "chat.follow_text": "अस्मान् अनुसरणं कुरुत",
        "chat.donation_link": "अस्माकं कार्ये दानं कुर्वन्तु",
        "chat.donation_text": " एतत् जालपुटं चालयितुं ।",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT कृते दानं कुर्वन्तु"},
        "donate-description": {"innerHtml": "कृपया दानं कृत्वा अस्मिन् परियोजनायां योगदानं कुर्वन्तु। हर लघु दान गणना।\nप्रेम, कृष्ण ❤️"},
        "share.question": "प्रश्न",
        "share.answer": "उत्तरम्‌",
        "share.ask_any": "जीवनस्य विषये यत्किमपि प्रश्नं भवति तत् GitaGPT -",
        "action.retry": "पुनः प्रयासं कुर्वन्तु",
        "action.share": "शेयर"
    },
    'ne': {
        "popup.welcome.title": {"innerHtml": "GitaGPT मा स्वागत छ"},
        "email-input": {"placeholder": "इमेल वा मोबाइल नम्बर"},
        "popup.language.label": {"innerHtml": "भाषा छनोट गर्नुस"},
        "popup.disclaimer": {"innerHtml": "यो इमेल वा मोबाइल नम्बर प्रदान गर्न पूर्ण वैकल्पिक छ।"},
        "email-submit": {"innerHtml": "जारी राख्नुहोस्"},
        "main.title": {"innerHtml": "GitaGPT"},
        "main.subtitle": {"innerHtml": "कृष्णसँग जीवनका रहस्यहरू खोल्दै, 8,00,000+ प्रश्नहरूको जवाफ दिइयो"},
        "search-box-input": {"placeholder": "गीतालाई प्रश्न सोध्नुहोस्.."},
        "main.disclaimer": {"innerHtml": "अस्वीकरण: कृपया आफ्नो विवेक प्रयोग गर्नुहोस् र यो प्रायोगिक एआई परियोजनामा आफ्नो निर्णयहरू आधारित नगर्नुहोस्।"},
        "menu.title": {"innerHtml": "GitaGPT"},
        "link-home": {"innerHtml": "होम"},
        "link-chat": {"innerHtml": "च्याट"},
        "menu.clear_session": {"innerHtml": "सत्र खाली गर्नुहोस्"},
        "chat.follow_text": "हामीलाई पछ्याउनुहोस्",
        "chat.donation_link": "हाम्रो कारणमा दान गर्नुहोस्",
        "chat.donation_text": " यो वेबसाइट चलिरहेको राख्न।",
        "donate.popup.welcome.title": {"innerHtml": "GitaGPT लाई दान गर्नुहोस्"},
        "donate-description": {"innerHtml": "कृपया दान गरेर यस परियोजनामा योगदान गर्नुहोस् । हरेक सानो दानको गणना हुन्छ।\nप्रेम, कृष्ण ❤️"},
        "share.question": "प्रश्न",
        "share.answer": "जवाफ",
        "share.ask_any": "GitaGPT लाई जीवनको बारेमा कुनै प्रश्न सोध्नुहोस् - ",
        "action.retry": "पुन: प्रयास गर्नुहोस्",
        "action.share": "सेयर गर्नुहोस्"
    }
}
let recordAudio;
if (typeof Audio === 'function') {
    recordAudio = new Audio('/static/record.mp3');
    recordAudio.load();
}

let recognition;
let recognizing = false;

const setSpeech = lang => {
    	'use strict';

	// check for support (webkit only)
	if (!('webkitSpeechRecognition' in window)) return;

    recognition = new webkitSpeechRecognition();

	var talkMsg = 'Speak now';
	// seconds to wait for more input after last
  	var defaultPatienceThreshold = 5;

	function capitalize(str) {
		return str.charAt(0).toUpperCase() + str.slice(1);
	}

	var inputEls = document.getElementsByClassName('speech-input');

	[].forEach.call(inputEls, function(inputEl) {
		var patience = parseInt(inputEl.dataset.patience, 10) || defaultPatienceThreshold;
		var micBtn, micIcon, holderIcon, newWrapper;
		var shouldCapitalize = true;

		// gather inputEl data
		var nextNode = inputEl.nextSibling;
		var parent = inputEl.parentNode;
		var inputRightBorder = parseInt(getComputedStyle(inputEl).borderRightWidth, 10);
		var buttonSize = 0.8 * (inputEl.dataset.buttonsize || inputEl.offsetHeight);

		// default max size for textareas
		if (!inputEl.dataset.buttonsize && inputEl.tagName === 'TEXTAREA' && buttonSize > 26) {
			buttonSize = 26;
		}

		// create wrapper if not present
		var wrapper = inputEl.parentNode;
		if (!wrapper.classList.contains('si-wrapper')) {
			wrapper = document.createElement('div');
			wrapper.classList.add('si-wrapper');
			wrapper.appendChild(parent.removeChild(inputEl));
			newWrapper = true;
		}

		// create mic button if not present
		micBtn = wrapper.querySelector('.si-btn');
		if (!micBtn) {
			micBtn = document.createElement('button');
			micBtn.type = 'button';
			micBtn.classList.add('si-btn');
			micBtn.textContent = 'speech input';
			micIcon = document.createElement('span');
			holderIcon = document.createElement('span');
			micIcon.classList.add('si-mic');
			holderIcon.classList.add('si-holder');
			micBtn.appendChild(micIcon);
			micBtn.appendChild(holderIcon);
			wrapper.appendChild(micBtn);

			// size and position mic and input
			micBtn.style.cursor = 'pointer';
			micBtn.style.top = 0.125 * buttonSize + 'px';
			micBtn.style.height = micBtn.style.width = buttonSize + 'px';
			inputEl.style.paddingRight = buttonSize - inputRightBorder + 'px';
		}

		// append wrapper where input was
		if (newWrapper) parent.insertBefore(wrapper, nextNode);

		// setup recognition
		var prefix = '';
		var isSentence;
		var timeout;
		var oldPlaceholder = null;
		recognition.continuous = true;
		recognition.interimResults = true;

		// if lang attribute is set on field use that
		// (defaults to use the lang of the root element)
		if (lang) recognition.lang = lang;

		function restartTimer() {
			timeout = setTimeout(function() {
				recognition.stop();
                recognizing = false;
			}, patience * 1000);
		}

		recognition.onstart = function() {
			oldPlaceholder = inputEl.placeholder;
			inputEl.placeholder = inputEl.dataset.ready || talkMsg;
			recognizing = true;
			micBtn.classList.add('listening');
			restartTimer();
        };

		recognition.onend = function() {
			recognizing = false;
			clearTimeout(timeout);
			micBtn.classList.remove('listening');
			if (oldPlaceholder !== null) inputEl.placeholder = oldPlaceholder;

			// If the <input> has data-instant-submit and a value,
			if (inputEl.dataset.instantSubmit !== undefined && inputEl.value) {
				// submit the form it's in (if it is in one).
				document.getElementById("ask-button").click();
			}
		};

		recognition.onresult = function(event) {
			clearTimeout(timeout);

			// get SpeechRecognitionResultList object
			var resultList = event.results;

			// go through each SpeechRecognitionResult object in the list
			var finalTranscript = '';
			var interimTranscript = '';
			for (var i = event.resultIndex; i < resultList.length; ++i) {
				var result = resultList[i];

				// get this result's first SpeechRecognitionAlternative object
				var firstAlternative = result[0];

				if (result.isFinal) {
					finalTranscript = firstAlternative.transcript;
				} else {
					interimTranscript += firstAlternative.transcript;
				}
			}

			// capitalize transcript if start of new sentence
			var transcript = finalTranscript || interimTranscript;
			transcript = !prefix || isSentence ? capitalize(transcript) : transcript;

			// append transcript to cached input value
			inputEl.value = prefix + transcript;

			// set cursur and scroll to end
			inputEl.focus();
			if (inputEl.tagName === 'INPUT') {
				inputEl.scrollLeft = inputEl.scrollWidth;
			} else {
				inputEl.scrollTop = inputEl.scrollHeight;
			}

			restartTimer();
		};

		micBtn.addEventListener('click', function(event) {
            setTimeout(() => {
               if (recordAudio) recordAudio.play();
            });
			event.preventDefault();

			// stop and exit if already going
			if (recognizing) {
				recognition.stop();
                recognizing = false;
				return;
			}

			// Cache current input value which the new transcript will be appended to
			var endsWithWhitespace = inputEl.value.slice(-1).match(/\s/);
			prefix = !inputEl.value || endsWithWhitespace ? inputEl.value : inputEl.value + ' ';

			// check if value ends with a sentence
			isSentence = prefix.trim().slice(-1).match(/[\.\?\!]/);

			// restart recognition
            try {
                recognition.start();
            } catch (e) {

            }

		}, false);
	});
}
const askExampleButtonElements = document.getElementsByClassName("ask-example-button");
const askButtonElement = document.getElementById("ask-button");
const inputElement = document.getElementById("search-box-input");
const chatFeedListElement = document.getElementById("chat-feed-list");
const disclaimer = document.getElementById('disclaimer');
const homeLinkElement = document.getElementById("link-home");
const chatLinkElement = document.getElementById("link-chat");
const stringTerminators = new Set(['?', '.', '!']);
let nbqTimeoutId = null;
let waitBeforeNbq = 15000;
const shareSupported = ('share' in navigator);
const hindiRegex = new RegExp("[\u0900-\u097F]");

const hasHindi = (str) => str.match(hindiRegex) !== null

const openDonatePopup = () => {
    document.getElementById("donate-modal").classList.add("d-block");
    document.getElementById("donate-modal").classList.add("show");
}

const closeDonatePopup = () => {
    document.getElementById("donate-modal").classList.remove("show");
    document.getElementById("donate-modal").classList.remove("d-block");
}

const fetchRandomQuestions = () => {
    let locale = localStorage.getItem("locale");
    if (!locale) locale = 'en';
    fetch('/api/home/questions?lang='+locale+'&count=3')
        .then(response => response.json())
        .then(data => {
            if (Array.isArray(data.questions) && data.questions.length === 3) {
                document.getElementById("random-ques-1").innerHTML = '"' + data.questions[0] + '"';
                document.getElementById("random-ques-2").innerHTML = '"' + data.questions[1] + '"';
                document.getElementById("random-ques-3").innerHTML = '"' + data.questions[2] + '"';
            }
        })
        .catch(error => {
            // handle any errors
            console.error(error);
        });
}

const setLocaleDropdown = (locale, selected) => {
    const dropdownSelectedElement = document.getElementById("dropdown-selected");
    const dropdownSelectedSignupElement = document.getElementById("dropdown-selected-signup");
    dropdownSelectedElement.innerHTML = selected;
    dropdownSelectedSignupElement.innerHTML = selected;
    setLocale(locale, selected);
}

const getConstants = (locale, key) => {
    if (locale == null) {
        locale = 'en';
    }
    if (key != null) {
        return constants[locale][key];
    }
    return constants[locale];
}

const setLocale = (locale, selected) => {
    localStorage.setItem("locale", locale);
    localStorage.setItem("locale-selected", selected);
    const constants = getConstants(locale);
    for(let id in constants) {
        let element = document.getElementById(id);
        if (element && typeof constants[id] === 'object') {
            if (constants[id]['innerHtml']) {
                element.innerHTML = constants[id]['innerHtml'];
            } else if (element) {
                element.setAttribute(Object.keys(constants[id])[0], Object.values(constants[id])[0]);
            }
        }
    }
    setTimeout(() => setSpeech(locale));
    fetchRandomQuestions();
}

const getUserResponsesJson = () => {
    const userResponses = localStorage.getItem("user-responses");
    let userResponsesJson = [];
    try {
        userResponsesJson = JSON.parse(userResponses);
        if (!Array.isArray(userResponsesJson)) {
            userResponsesJson = [];
        }
    } catch (e) {
    }
    return userResponsesJson;
}

const likeAnswer = (id) => {
    const likeButton = document.querySelectorAll('[like-id="'+id+'"]')[0];
    const dislikeButton = document.querySelectorAll('[dislike-id="'+id+'"]')[0];
    if (likeButton) {
        likeButton.classList.add("active");
    }
    if (dislikeButton) {
        dislikeButton.classList.remove("active");
    }
}

const dislikeAnswer = (id) => {
   const likeButton = document.querySelectorAll('[like-id="'+id+'"]')[0];
    const dislikeButton = document.querySelectorAll('[dislike-id="'+id+'"]')[0];
    if (likeButton) {
        likeButton.classList.remove("active");
    }
    if (dislikeButton) {
        dislikeButton.classList.add("active");
    }
    const userResponses = getUserResponsesJson();
    const current = userResponses.find(r => r.id === id);
    if (current) {
        retryFromGita(id, current.question);
    }
}

const shareAnswer = (id) => {
    if (!shareSupported) {
        alert("Currently, sharing is only supported on mobile devices.");
        return;
    }
    const locale = localStorage.getItem("locale");
    const userResponses = getUserResponsesJson();
    const current = userResponses.find(r => r.id === id);
    if (current && current.question && current.answer) {
        let text = getConstants(locale, "share.question") + ":\n" + current.question.trim() + "\n\n" + getConstants(locale, "share.answer") + ":\n" + current.answer.trim() + "\n\n"+ getConstants(locale, "share.ask_any");
        const shareOpts = {
          title: current.question,
          text: text,
          url: 'https://gitagpt.org',
        };
        navigator.share(shareOpts);
    }
}

const getActionButtons = (id) => {
    const buttonContainer = document.createElement("div");
    buttonContainer.className = "button-container";

    const dislikeButton = document.createElement("button");
    dislikeButton.className = "btn btn-secondary comment-button dislike";
    const dislikeButtonIcon = document.createElement("i");
    dislikeButtonIcon.className = "fa-solid fa-repeat";
    dislikeButton.appendChild(dislikeButtonIcon);
    const locale = localStorage.getItem("locale");
    dislikeButton.innerHTML = dislikeButton.innerHTML + "&nbsp;" + getConstants(locale, "action.retry");

    dislikeButton.onclick = () => dislikeAnswer(id);
    dislikeButton.setAttribute("dislike-id", id);

    const shareButton = document.createElement("button");
    shareButton.className = "btn btn-secondary comment-button share"
    const shareButtonIcon = document.createElement("i");
    shareButtonIcon.className = "fa-solid fa-share";
    shareButton.appendChild(shareButtonIcon);
    shareButton.innerHTML = shareButton.innerHTML + "&nbsp;" + getConstants(locale, 'action.share');
    shareButton.onclick = () => shareAnswer(id);
    shareButton.setAttribute("share-id", id);

    buttonContainer.appendChild(dislikeButton);
    buttonContainer.appendChild(shareButton);
    return buttonContainer;
}

const addCharsWithSleep = (str, divElement, showFollow, id) => {
    const locale = localStorage.getItem('locale');
    const follow_text = getConstants(locale)['chat.follow_text'];
    const donation_link = getConstants(locale)['chat.donation_link'];
    const donation_text = getConstants(locale)['chat.donation_text'];
    let i = 0;
    let intervalId = setInterval(() => {
    if (i >= str.length) {
      clearInterval(intervalId);
      return;
    }
    if (str[i] === '\n' && divElement.innerHTML.length > 1) {
        divElement.innerHTML = divElement.innerHTML + '<br/>';
    } else {
        divElement.innerHTML = divElement.innerHTML + str[i];
        if (i%20 === 0 || i === str.length - 1) {
            const chatFeed = document.getElementById('chat-feed');
            chatFeed.scrollTop = chatFeed.scrollHeight;
        }
        if ( showFollow && i === str.length - 1) {
            divElement.innerHTML = divElement.innerHTML + '<br/><br/>' + follow_text;
            divElement.appendChild(get_follow_div());
            divElement.innerHTML = divElement.innerHTML + '<br/><a class="donate-link" onclick="openDonatePopup()">'+donation_link+'</a> ' + donation_text;
            startNbqTimer();
            // append like dislike and share buttons
            if (id) {
                divElement.appendChild(getActionButtons(id));
            }
            const chatFeed = document.getElementById('chat-feed');
            chatFeed.scrollTop = chatFeed.scrollHeight;
        }
    }

    i++;
  }, 20);
}

const get_follow_div = () => {

    const socialShareElement = document.createElement("div");
    socialShareElement.className = "chat-social-share"

    const twitterLinkElement = document.createElement("a");
    twitterLinkElement.setAttribute("href","https://twitter.com/gitaGPT");
    twitterLinkElement.setAttribute("role","button");
    twitterLinkElement.setAttribute("target","_blank");

    const twitterImageElement = document.createElement("img");
    twitterImageElement.className = "twitter-icon";
    twitterImageElement.setAttribute("src","/static/twitter-icon.png");

    twitterLinkElement.appendChild(twitterImageElement);
    socialShareElement.appendChild(twitterLinkElement);

    const instagramLinkElement = document.createElement("a");
    instagramLinkElement.setAttribute("href","https://instagram.com/gitagptorg");
    instagramLinkElement.setAttribute("role","button");
    instagramLinkElement.setAttribute("target","_blank");

    const instagramImageElement = document.createElement("img");
    instagramImageElement.className = "insta-icon";
    instagramImageElement.setAttribute("src","/static/insta-icon.png");

    instagramLinkElement.appendChild(instagramImageElement);
    socialShareElement.appendChild(instagramLinkElement);

    return socialShareElement;
}

const createQuestionElement = (questionText) => {
    const newDiv = document.createElement("li");
    newDiv.className = "user-card d-flex align-self-end";

    const cardDiv = document.createElement("div");
    cardDiv.className = "card";

    const cardBodyDiv = document.createElement("div");
    cardBodyDiv.innerHTML = questionText;
    cardBodyDiv.className = "card-body";

    cardDiv.appendChild(cardBodyDiv);
    newDiv.appendChild(cardDiv);

    const imageElement = document.createElement("img");
    imageElement.className="align-baseline"
    imageElement.src = "/static/user-icon.png";
    newDiv.appendChild(imageElement);

    return newDiv;
}

const createResponseElement = (responseText, animate, loadingElement, showFollow, id) => {
    const locale = localStorage.getItem('locale');
    const follow_text = getConstants(locale, 'chat.follow_text');
    if (loadingElement) {
        const cardBodyDivElement = loadingElement.lastChild.firstChild;
        cardBodyDivElement.firstChild.remove();
        if (animate) {
            addCharsWithSleep(responseText, cardBodyDivElement, showFollow, id);
        } else {
            cardBodyDivElement.innerHTML = responseText.trim().replaceAll('\n', "<br/>");
            cardBodyDivElement.innerHTML = cardBodyDivElement.innerHTML + '<br/><br/>' + follow_text;
            cardBodyDivElement.appendChild(get_follow_div());
            const chatFeed = document.getElementById('chat-feed');
            chatFeed.scrollTop = chatFeed.scrollHeight;
        }
        return loadingElement;
    }
    const newDiv = document.createElement("li");
    newDiv.className = "gita-card d-flex align-self-start";

    const imageElement = document.createElement("img");
    imageElement.className="align-baseline"
    imageElement.src = "/static/bhagavadagita-icon.jpeg";
    newDiv.appendChild(imageElement);

    const cardDiv = document.createElement("div");
    cardDiv.className = "card text-bg-dark mb-3";

    const cardBodyDiv = document.createElement("div");
    if (animate) {
        addCharsWithSleep(responseText, cardBodyDiv, showFollow);
    } else {
        cardBodyDiv.innerHTML = responseText.trim().replaceAll('\n', "<br/>");
    }
    cardBodyDiv.className = "card-body translate-text";

    cardDiv.appendChild(cardBodyDiv);
    newDiv.appendChild(cardDiv);
    return newDiv;
}

const createLoadingResponse = () => {
    const newDiv = document.createElement("li");
    newDiv.className = "gita-card d-flex align-self-start";

    const imageElement = document.createElement("img");
    imageElement.className="align-baseline"
    imageElement.src = "/static/bhagavadagita-icon.jpeg";
    newDiv.appendChild(imageElement);

    const cardDiv = document.createElement("div");
    cardDiv.className = "card text-bg-dark mb-3";

    const cardBodyDiv = document.createElement("div");
    cardBodyDiv.className = "card-body translate-text";

    const typingDot1 = document.createElement("span");
    const typingDot2 = document.createElement("span");
    const typingDot3 = document.createElement("span");
    const typingDots = document.createElement("div");
    typingDots.appendChild(typingDot1);
    typingDots.appendChild(typingDot2);
    typingDots.appendChild(typingDot3);
    typingDots.className = "typing"
    cardBodyDiv.appendChild(typingDots);

    cardDiv.appendChild(cardBodyDiv);
    newDiv.appendChild(cardDiv);

    return newDiv;
}

const disableAskButton = () => {
    askButtonElement.disabled = true;
    askButtonElement.setAttribute("disabled", "disabled");
    inputElement.disabled = true;
    inputElement.setAttribute("disabled", "disabled");
}

const enableAskButton = () => {
    askButtonElement.disabled = false;
    askButtonElement.removeAttribute('disabled');
    inputElement.disabled = false;
    inputElement.removeAttribute('disabled');
    inputElement.focus();
}

const appendUserResponses = (question, answer, id) => {
    let userResponses = JSON.parse(localStorage.getItem("user-responses"));
    if (!Array.isArray(userResponses)) {
        userResponses = [];
    }
    userResponses.push({
        "question": question,
        "answer": answer,
        "id": id
    });
    localStorage.setItem("user-responses", JSON.stringify(userResponses));
}

const clearNbq = () => {
    let nbqElement = document.getElementById("nbq");
    if (nbqElement && !nbqElement.classList.contains("d-none")) {
        nbqElement.classList.add("d-none");
    }
    if (nbqTimeoutId) {
        clearTimeout(nbqTimeoutId);
        nbqTimeoutId = null;
    }
}

function logError(error) {
    fetch('/api/log/error?message=' + error )
        .then(response => response.json())
        .then(data => {
            //
        })
        .catch(error => {
            // handle any errors
            console.error(error);
        });
}

const retryFromGita = async (id, query) => {
    if (!id) return;
    clearNbq();
    showChat();
    disableAskButton();
    inputElement.value = "";
    const loadingElement = chatFeedListElement.appendChild(createLoadingResponse());
    const chatFeed = document.getElementById('chat-feed');
    const userEmail = localStorage.getItem("user-email");
    let locale = localStorage.getItem("locale")
    if (!locale) locale = 'en';
    chatFeed.scrollTop = chatFeed.scrollHeight;
    fetch('/api/ask/retry?id=' + id + '&email=' + userEmail + '&locale=' + locale)
        .then(response => response.json())
        .then(async data => {
            if (data.response) {
                let translatedAnswer = data.response;
                if (locale !== 'en') {
                    translatedAnswer = await translateToLang(data.response, 'auto', locale);
                }
                createResponseElement(translatedAnswer, true, loadingElement, data.show_follow, data.id);
                appendUserResponses(query, translatedAnswer, data.id);
                if (!data.max_queries) {
                    enableAskButton();
                }
            } else {
                createResponseElement(data.error, true, loadingElement);
                enableAskButton();
            }
        })
        .catch(error => {
            // handle any errors
            console.error(error);
            enableAskButton();
        });
}

const fetchResponseFromGita = async (query) => {
    if (recognition && recognizing) {
        recognition.stop();
        recognizing = false;
    }
    if (!query) return;
    let translatedQuery = query;
    clearNbq();
    showChat();
    disableAskButton();
    setTimeout(() => inputElement.value = "", 0);
    chatFeedListElement.appendChild(createQuestionElement(query));
    let locale = localStorage.getItem("locale")
    if (!locale) locale = 'en';

    if (locale !== 'en') {
        // translate to english
        translatedQuery = await translateToLang(query, 'auto', 'en');
    }
    const loadingElement = chatFeedListElement.appendChild(createLoadingResponse());
    const chatFeed = document.getElementById('chat-feed');
    const userEmail = localStorage.getItem("user-email");
    chatFeed.scrollTop = chatFeed.scrollHeight;

    fetch('/api/ask/gita?q=' + translatedQuery + '&email=' + userEmail + '&locale=' + locale)
        .then(response => response.json())
        .then(async data => {
            if (data.response) {
                let translatedAnswer = data.response;
                if (locale !== 'en') {
                    translatedAnswer = await translateToLang(data.response, 'auto', locale);
                }
                createResponseElement(translatedAnswer, true, loadingElement, data.show_follow, data.id);
                appendUserResponses(query, translatedAnswer, data.id);
                if (!data.max_queries) {
                    enableAskButton();
                }
            } else {
                createResponseElement(data.error, true, loadingElement);
                enableAskButton();
            }
        })
        .catch(error => {
            // handle any errors
            console.error(error);
            enableAskButton();
        });
}

const showHome = () => {
    document.getElementById("chat-feed").classList.add("d-none");
    for (let element of document.getElementsByClassName("main-content")) {
      element.classList.remove("d-none");
    }
    document.getElementById("search-box-container").classList.remove("fixed-bottom");
    document.getElementById("search-box-container").classList.remove("w-100");
    document.getElementById('bmc-wbtn').style["display"] = "flex"
    homeLinkElement.classList.add("active");
    chatLinkElement.classList.remove("active");
    document.getElementById("nav-close-btn").click();
    disclaimer.classList.remove('d-none');
    document.getElementById("main").classList.add("home");
}

const showChat = () => {
    for (let element of document.getElementsByClassName("main-content")) {
      element.classList.add("d-none");
    }
    document.getElementById("search-box-container").classList.add("fixed-bottom");
    document.getElementById("search-box-container").classList.add("w-100");
    document.getElementById("chat-feed").classList.remove("d-none");
    document.getElementById('bmc-wbtn').style["display"] = "none"
    chatLinkElement.classList.add("active");
    homeLinkElement.classList.remove("active");
    document.getElementById("nav-close-btn").click();
    disclaimer.classList.add('d-none');
    document.getElementById("main").classList.remove("home");
    // scroll
    const chatFeed = document.getElementById('chat-feed');
    chatFeed.scrollTop = chatFeed.scrollHeight;
}

const closeEmailPopup = () => {
    const userEmail = document.getElementById("email-input");
    if (userEmail.value) {
        localStorage.setItem("user-email", userEmail.value);
    }

    document.getElementById("email-modal").classList.remove("show");
    document.getElementById("email-modal").classList.remove("display-block");
    setTimeout(() => {
        document.getElementById('bmc-wbtn').style["display"] = "flex"
    }, 1000);
}


askButtonElement.addEventListener("click", function() {
    const query = inputElement.value;
    fetchResponseFromGita(query);
});

inputElement.addEventListener("keydown", function (event) {
    if (event.key === 'Enter') {
        const query = inputElement.value;
        fetchResponseFromGita(query);
    }
    return true;
});

inputElement.addEventListener("click", function (event) {
    if (recognition && recognizing) {
        recognition.stop();
        recognizing = false;
    }
    return true;
});

for (let i = 0; i < askExampleButtonElements.length; i++) {
    askExampleButtonElements[i].addEventListener("click", function() {
        let questionText = askExampleButtonElements[i].children[0]?.children[0]?.innerHTML ? askExampleButtonElements[i].children[0]?.children[0]?.innerHTML
            :  askExampleButtonElements[i].innerHTML
        inputElement.value = questionText.substring(1, questionText.length - 1);
        inputElement.focus();
    });
}

document.getElementById("email-submit").addEventListener("click", closeEmailPopup);
document.getElementById("email-popup-close").addEventListener("click", closeEmailPopup);

// Get email data from localStorage
const email = localStorage.getItem("user-email");
const userResponses = localStorage.getItem("user-responses");
const locale = localStorage.getItem("locale");
const localeSelected = localStorage.getItem("locale-selected");
let userResponsesJson = getUserResponsesJson();

// prefill email
if (email) {
    document.getElementById("email-input").value = email;
}

// don't show email popup if locale selection is present
if (locale !== null) {
    document.getElementById("email-modal").classList.remove("show");
    document.getElementById("email-modal").classList.remove("display-block");
    if (localeSelected == null) {
        if (locale === 'hi') {
            setLocaleDropdown('hi', 'हिंदी');
        } else if (locale === 'en') {
            setLocaleDropdown('en', 'English');
        }
    } else {
        setLocaleDropdown(locale, localeSelected);
    }
} else {
    setLocaleDropdown('en', 'English');
    setTimeout(() => {
        // remove buy me a coffee
        if (document.body.children[document.body.childElementCount - 1].innerHTML.indexOf("Buy me a coffee") > 0) {
            document.body.children[document.body.childElementCount - 1].remove();
            document.getElementById('bmc-wbtn').style["display"] = "none";
        }
    }, 100)
}

if (!userResponses || !Array.isArray(userResponsesJson)) {
    localStorage.setItem("user-responses", "[]");
} else {
    for (let index = 0; index < userResponsesJson.length; index++) {
        let response = userResponsesJson[index];
        if (response["question"] && response["answer"]) {
            chatFeedListElement.appendChild(createQuestionElement(response["question"]));
            chatFeedListElement.appendChild(createResponseElement(response["answer"], false, null, index === userResponsesJson.length - 1));
        }
    }
}

const startNbqTimer = () => {
    nbqTimeoutId = setTimeout(() => {
        nbqTimeoutId = null;
        fetchNbq();
    }, waitBeforeNbq);
}

const createNextQuestionElement = (question) => {
    const chatFeedElement = document.getElementById("chat-feed");
    let nbqElement = document.getElementById("nbq");
    let nbqContainer = document.getElementById("nbq-container");
    if (nbqElement != null) {
        nbqElement.innerHTML = question;
        nbqElement.classList.remove("d-none");
    } else {
        nbqContainer = document.createElement("div");
        nbqContainer.id = "nbq-container";
        nbqContainer.className = "nbq-container";
        nbqElement = document.createElement("button");
        nbqElement.className = "btn btn-secondary nbq ask-example-button";
        nbqElement.innerHTML = question;
        nbqElement.id = "nbq";
        nbqElement.addEventListener("click", function() {
                inputElement.value = nbqElement.innerHTML;
                inputElement.focus();
                nbqElement.classList.add("d-none");
        });
        nbqContainer.appendChild(nbqElement);
        chatFeedElement.appendChild(nbqContainer);
    }
}

const fetchNbq = () => {
    let locale = localStorage.getItem("locale");
    if (!locale) locale = 'en';
    const userResponsesJson = getUserResponsesJson();
    let prevQ = userResponsesJson.map(res =>  {
        let question = res.question;
        let lastChar = question.charAt(question.length - 1);
        if (!stringTerminators.has(lastChar)) {
            question = question + '?';
        }
        return question;
    }).reverse().slice(0,3).join(" ");
    const userEmail = localStorage.getItem("user-email");
    if (!prevQ) return;

    // fetch('/api/nbq?q=' + prevQ + '&email=' + userEmail)
    //     .then(response => response.json())
    //     .then(async data => {
    //         if (data.next_question) {
    //             let translatedQuery = data.next_question;
    //             if (locale !== 'en') {
    //                 translatedQuery = await translateToLang(data.next_question, 'auto', locale);
    //             }
    //             createNextQuestionElement(translatedQuery);
    //         }
    //     })
    fetch('/api/home/questions?lang='+locale+'&count=1')
        .then(response => response.json())
        .then(data => {
            if (Array.isArray(data.questions)) {
                createNextQuestionElement(data.questions[0]);
            }
        })
        .catch(error => {
            // handle any errors
            console.error(error);
        });
}

inputElement.addEventListener("click", clearNbq);
inputElement.addEventListener("keypress", clearNbq);

const translateToLang = async (query, fromLocale, targetLocale) => {
    try {
        const response = await fetch("https://translate.googleapis.com/translate_a/single?client=gtx&sl="+ fromLocale +"&tl="+ targetLocale +"&dt=t&q=" + query);
        const jsonData = await response.json();
        return jsonData[0].map(tokens => tokens[0]).join('');
    } catch (ex) {
        logError(ex);
    }
}

const clearSession = () => {
    localStorage.clear();
    location.reload();
}